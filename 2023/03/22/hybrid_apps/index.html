

<!DOCTYPE html>
<html lang="zh-CN" data-default-color-scheme=auto>



<head>
  <meta charset="UTF-8">
  <link rel="apple-touch-icon" sizes="76x76" href="/img/fluid.png">
  <link rel="icon" href="/img/fluid.png">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, shrink-to-fit=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  
  <meta name="theme-color" content="#2f4154">
  <meta name="author" content="Zeus">
  <meta name="keywords" content="">
  
    <meta name="description" content="Hybrid AppWeb App 毫无疑问Web App就是成本最低，最快速地解决方案了。尤其是近两年非常流行的响应式设计，Web App市场提供了非常好的实践场地。最近典型的Web App最佳案例是Sun天气应用了，其细节处理让人赞不绝口。  一般来说，拥有下面特点的就是一个Web App了：使用浏览器运行；纯Web前端架构，很多重要手机特性无法访问，例如联系人以及Push notificat">
<meta property="og:type" content="article">
<meta property="og:title" content="Hybrid App">
<meta property="og:url" content="http://example.com/2023/03/22/hybrid_apps/index.html">
<meta property="og:site_name" content="Zeus">
<meta property="og:description" content="Hybrid AppWeb App 毫无疑问Web App就是成本最低，最快速地解决方案了。尤其是近两年非常流行的响应式设计，Web App市场提供了非常好的实践场地。最近典型的Web App最佳案例是Sun天气应用了，其细节处理让人赞不绝口。  一般来说，拥有下面特点的就是一个Web App了：使用浏览器运行；纯Web前端架构，很多重要手机特性无法访问，例如联系人以及Push notificat">
<meta property="og:locale" content="zh_CN">
<meta property="article:published_time" content="2023-03-22T03:31:10.000Z">
<meta property="article:modified_time" content="2023-04-12T02:48:21.000Z">
<meta property="article:author" content="Zeus">
<meta name="twitter:card" content="summary_large_image">
  
  
  
  <title>Hybrid App - Zeus</title>

  <link  rel="stylesheet" href="https://lib.baomitu.com/twitter-bootstrap/4.6.1/css/bootstrap.min.css" />



  <link  rel="stylesheet" href="https://lib.baomitu.com/github-markdown-css/4.0.0/github-markdown.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/hint.css/2.7.0/hint.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.css" />



<!-- 主题依赖的图标库，不要自行修改 -->
<!-- Do not modify the link that theme dependent icons -->

<link rel="stylesheet" href="//at.alicdn.com/t/font_1749284_hj8rtnfg7um.css">



<link rel="stylesheet" href="//at.alicdn.com/t/font_1736178_lbnruvf0jn.css">


<link  rel="stylesheet" href="/css/main.css" />


  <link id="highlight-css" rel="stylesheet" href="/css/highlight.css" />
  
    <link id="highlight-css-dark" rel="stylesheet" href="/css/highlight-dark.css" />
  




  <script id="fluid-configs">
    var Fluid = window.Fluid || {};
    Fluid.ctx = Object.assign({}, Fluid.ctx)
    var CONFIG = {"hostname":"example.com","root":"/","version":"1.9.4","typing":{"enable":true,"typeSpeed":70,"cursorChar":"_","loop":false,"scope":[]},"anchorjs":{"enable":true,"element":"h1,h2,h3,h4,h5,h6","placement":"left","visible":"hover","icon":""},"progressbar":{"enable":true,"height_px":3,"color":"#29d","options":{"showSpinner":false,"trickleSpeed":100}},"code_language":{"enable":true,"default":"TEXT"},"copy_btn":true,"image_caption":{"enable":true},"image_zoom":{"enable":true,"img_url_replace":["",""]},"toc":{"enable":true,"placement":"right","headingSelector":"h1,h2,h3,h4,h5,h6","collapseDepth":0},"lazyload":{"enable":true,"loading_img":"/img/loading.gif","onlypost":false,"offset_factor":2},"web_analytics":{"enable":false,"follow_dnt":true,"baidu":null,"google":null,"gtag":null,"tencent":{"sid":null,"cid":null},"woyaola":null,"cnzz":null,"leancloud":{"app_id":null,"app_key":null,"server_url":null,"path":"window.location.pathname","ignore_local":false}},"search_path":"/local-search.xml"};

    if (CONFIG.web_analytics.follow_dnt) {
      var dntVal = navigator.doNotTrack || window.doNotTrack || navigator.msDoNotTrack;
      Fluid.ctx.dnt = dntVal && (dntVal.startsWith('1') || dntVal.startsWith('yes') || dntVal.startsWith('on'));
    }
  </script>
  <script  src="/js/utils.js" ></script>
  <script  src="/js/color-schema.js" ></script>
  


  
<meta name="generator" content="Hexo 6.3.0"></head>


<body>
  

  <header>
    

<div class="header-inner" style="height: 20vh;">
  <nav id="navbar" class="navbar fixed-top  navbar-expand-lg navbar-dark scrolling-navbar">
  <div class="container">
    <a class="navbar-brand" href="/">
      <strong>zeus</strong>
    </a>

    <button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse"
            data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <div class="animated-icon"><span></span><span></span><span></span></div>
    </button>

    <!-- Collapsible content -->
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav ml-auto text-center">
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/">
                <i class="iconfont icon-home-fill"></i>
                <span>首页</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/archives/">
                <i class="iconfont icon-archive-fill"></i>
                <span>归档</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/about/">
                <i class="iconfont icon-user-fill"></i>
                <span>关于</span>
              </a>
            </li>
          
        
        
          <li class="nav-item" id="search-btn">
            <a class="nav-link" target="_self" href="javascript:;" data-toggle="modal" data-target="#modalSearch" aria-label="Search">
              <i class="iconfont icon-search"></i>
            </a>
          </li>
          
        
        
          <li class="nav-item" id="color-toggle-btn">
            <a class="nav-link" target="_self" href="javascript:;" aria-label="Color Toggle">
              <i class="iconfont icon-dark" id="color-toggle-icon"></i>
            </a>
          </li>
        
      </ul>
    </div>
  </div>
</nav>

  

<div id="banner" class="banner" parallax=true
     style="background: url('/img/default.png') no-repeat center center; background-size: cover;">
  <div class="full-bg-img">
    <div class="mask flex-center" style="background-color: rgba(0, 0, 0, 0.3)">
      <div class="banner-text text-center fade-in-up">
        <div class="h2">
          
            <span id="subtitle" data-typed-text="Hybrid App"></span>
          
        </div>

        
          
  <div class="mt-3">
    
    
      <span class="post-meta">
        <i class="iconfont icon-date-fill" aria-hidden="true"></i>
        <time datetime="2023-03-22 11:31" pubdate>
          2023年3月22日 中午
        </time>
      </span>
    
  </div>

  <div class="mt-1">
    
      <span class="post-meta mr-2">
        <i class="iconfont icon-chart"></i>
        
          9.2k 字
        
      </span>
    

    
      <span class="post-meta mr-2">
        <i class="iconfont icon-clock-fill"></i>
        
        
        
          77 分钟
        
      </span>
    

    
    
  </div>


        
      </div>

      
    </div>
  </div>
</div>

</div>

  </header>

  <main>
    
      

<div class="container-fluid nopadding-x">
  <div class="row nomargin-x">
    <div class="side-col d-none d-lg-block col-lg-2">
      

    </div>

    <div class="col-lg-8 nopadding-x-md">
      <div class="container nopadding-x-md" id="board-ctn">
        <div id="board">
          <article class="post-content mx-auto">
            <!-- SEO header -->
            <h1 style="display: none">Hybrid App</h1>
            
            
              <div class="markdown-body">
                
                <h1 id="Hybrid-App"><a href="#Hybrid-App" class="headerlink" title="Hybrid App"></a>Hybrid App</h1><p><em>Web App</em></p>
<p>毫无疑问Web App就是成本最低，最快速地解决方案了。尤其是近两年非常流行的响应式设计，Web App市场提供了非常好的实践场地。最近典型的Web App最佳案例是Sun天气应用了，其细节处理让人赞不绝口。</p>
<p> 一般来说，拥有下面特点的就是一个Web App了：使用浏览器运行；纯Web前端架构，很多重要手机特性无法访问，例如联系人以及Push notification之类的；Single Page App；销售渠道多限于浏览器。</p>
<p>Hybrid App</p>
<p>所谓的Hybrid App其实会有不同的分支。而且会和Native应用有重合的地方。下面就说三种不同的解决方案。</p>
<ul>
<li><p>方案一：使用PhoneGap、AppCan之类的中间件，以WebView作为用户界面层，以Javascript作为基本逻辑，以及和中间件通讯，再由中间件访问底层API的方式，进行应用开发。这种架构一般会非常依赖WebView层的性能。</p>
</li>
<li><p>方案二：使用Adobe Air、RubyMotion、Appcelerator或者是Xamarin这种非官方语言的工具，打包成原生应用的方式开发。为什么笔者会将它们定义为Hybrid App，主要是它们并没有很单纯地使用原生提供的语言进行开发，而是通过对开发者提供友好的开发工具，并折中地把这种开发语言转换成原生语言，最终打包出整个应用，所以也属于混合应用范畴。</p>
</li>
<li><p>方案三：在开发原生应用的基础上，嵌入WebView但是整体的架构使用原生应用提供，一般这样的开发由Native开发人员和Web前端开发人员组成。Native开发人员会写好基本的架构以及API让Web开发人员开发界面以及大部分的渲染。保证到交互设计，以及开发都有一个比较折中的效果出来，优化得好也会有很棒的效果。（当年Facebook Three20就使用该方案）</p>
</li>
</ul>
<p>因此，Hybrid App有以下的特性：</p>
<ol>
<li>开发时可能不采用或者大部分不采用原生语言，但是却有所有原生应用的特性；</li>
<li>架构方案会和原生有出入，基本由工具而定；</li>
<li>具有跨平台特性；</li>
<li>一般开发相对原生开发的方式要简单。</li>
</ol>
<h1 id="Native-App"><a href="#Native-App" class="headerlink" title="Native App"></a>Native App</h1><p>Native App毫无疑问是最可靠的方案。但是学习成本，人才成本，开发效率以及照顾不同平台的特性去考虑，都成为了开发人员心目中的一道坎。至于说这道坎是不可逾越的还是一道让你提高的坎，笔者觉得完全取决于你自己。基于种种因素的考虑，估计很多人就会选择折中的方案到了Hybrid App的开发行列当中，包括笔者自己也是这样过来的。</p>
<p>下面更多的内容都将围绕Hybrid App开发展开讨论。</p>
<h4 id="Hybrid-App在开发当中的优点和缺点"><a href="#Hybrid-App在开发当中的优点和缺点" class="headerlink" title="Hybrid App在开发当中的优点和缺点"></a>Hybrid App在开发当中的优点和缺点</h4><p>在Hybrid App的开发过程中，几种不同的方案笔者都有经历过。当然也经历到了Native App的开发阶段。在如此纠结复杂的过程中给了笔者不少的经验，下面笔者也会就自身的经验和大家分享这些方案当中的优缺点。对于初入行的朋友，笔者是从Web前端入行的，毕竟门槛较低，而且能够快速地培养自己的信心以及对代码的感觉。深入后就开始接触到移动开发这块了。所以会先从Hybrid App的第一种方案说起吧。</p>
<blockquote>
<p>方案一（Web架构为重）</p>
</blockquote>
<p>优点：</p>
<ol>
<li>全Web开发，一定程度上有利于Web前端技术人员快速地构建页面样式；</li>
<li>有利于在不同的平台上面展示同一个交互层；</li>
<li>便于调试，开发的时候可以通过浏览器的方式进行调试，工具丰富。</li>
</ol>
<p>缺点:</p>
<ol>
<li>虽然说你可以专注在界面以及交互开发上了，但是这页会成为一个缺点，比如说要仿造一个iOS的默认设置界面，就需要大量的html以及css代码了，而且效果不一定和iPhone上面的界面一样好；</li>
<li>正因为这是跨平台的开发，所以还是这句话：兼容是前端的痛。了解过在Android机器上面的Web开发就知道这个痛了。比如前些年在Android设备上面写圆角，border-radius:10px，在Android的设备上面会出现毛边。</li>
<li>便于调试其实是在Web界面层的。但是实际上做Hybrid App开发的时候，你会遇到需求，进入手机的底层请求，做某些处理。比如说如果该应用有Push</li>
<li>Notification服务的话，你就需要到底层，获取Push Notification发生时的数据，以及做相应的交互处理。当然类似PhoneGap这类框架，已经有很好的插件机制去帮助你解决类似的问题，当然还有Game Center之类的插件，具体的话可以到Github去关注PhoneGap官方的账户，资源非常丰富；</li>
</ol>
<blockquote>
<p>方案二（编译转换方式）</p>
</blockquote>
<p>优点：</p>
<ol>
<li>利用自己熟悉的语言，进行应用开发，比如RubyMotion，就是使用Ruby语言去做iOS开发，开发起来的话，代码量是数量级地下降啊。</li>
<li>部分开发工具提供跨平台的功能，让你的应用能够快速地发布到不同的平台上面。比如Mono社区的Xamarin，就是典型的例子了。使用C#语言，能够把你的应用发布到iOS，Android以及WinPhone市场上面；</li>
<li>开发出来的程序运行高效。大部分这种架构的应用，其实还是非常依赖底层的东西的，而且包括界面的东西，都是使用原生的API，效率就当然要比类似于PhoneGap这种架构要好了；</li>
</ol>
<p>缺点：</p>
<ul>
<li>严重依赖于其工具厂商提供的工具包，调试的时候就要有全套的工具。当然一般来说这些厂商都会以收费的形式发布他们的工具，相应的也有客服提供技术支持。遇到系统升级，第三方sdk升级，开发工具出现bug等，那么就要等待工具厂商解决了。相当于把风险压在对方身上了，自己却要承担责任。</li>
</ul>
<blockquote>
<p>方案三（Native架构为重）</p>
</blockquote>
<p>优点：</p>
<ol>
<li>这无疑是最稳定的Hybrid App开发方式了，交互层的效率上由Native的东西解决了，而且架构上基本就是在App内写网页，连App Store都是采用了该种方案；</li>
<li>开发时分工非常明确，底层的由iOS开发人员处理，上层的由Web前端开发人员处理；</li>
<li>有效的在线参数配置方式，以便于及时在线替换界面；</li>
</ol>
<p>缺点：</p>
<ol>
<li>团队至少需要两个工程师，一个是Web的，一个是iOS的。当然如果开发人员会两种技术也可独立承担；</li>
<li>还是运行效率，要权衡好多少界面采用Web来渲染，毕竟WebView的效率会相对降低，以前Facebook就是因为Web的渲染效率低下，把整个应用改为原生的解决方案。当然这里面可以通过优化来解决。但是优化也是有限度的，如Ruby创始人Matz所说优化要恰当（包括花的时间，技巧等），而且有时候的优化达到的回报率不一定达到你自己的期望。</li>
</ol>
<h2 id="Hybrid-App和Native-App开发对比"><a href="#Hybrid-App和Native-App开发对比" class="headerlink" title="Hybrid App和Native App开发对比"></a>Hybrid App和Native App开发对比</h2><p>因为方案三中的思想基本上就是原生应用的开发思想了。这里要做的对比应该不算大，因此笔者不会做太多的阐述介绍两者的不同。但是如果是偏重Web架构的，或者是以方案二这种透过特殊工具开发的，就和原生开发有对比了。这次笔者暂时会以方案一拿来讨论。讨论中主要会以架构，代码管理上来讨论，当然也会说到部分细节。</p>
<blockquote>
<p>架构讨论：</p>
</blockquote>
<p>因为这是偏重于Web开发的应用，这里面就需要开发人员有很强烈的大型Web前端架构思想在里面。提到这里可能马上浮现在你脑海中的词语就是：angular.js，require.js，sea.js，backbone.js等。没错，这些工具都能够帮助你快速地梳理好思路，管理好你的Web应用。对开发者最友好的，发挥空间最大的非PhoneGap莫属了。所以笔者就会以PhoneGap应用展开讨论。（因为类似Sencha也有提供方案，但是Sencha本身是一个重量级的框架，而且有自己的思想在里头，加上他本身也提供开发工具，在这里就不适合讨论了。对于开发者来说可以根据自己的需求选择好工具）</p>
<p>从工具上看：</p>
<p><a target="_blank" rel="noopener" href="http://angularjs.org/">Angular.js</a></p>
<p>用于双向绑定，网络请求，视图管理等工作。</p>
<p><a target="_blank" rel="noopener" href="http://angularjs.org/http://requirejs.org/">Require.js</a></p>
<p>javascript模块化工具，在使用较多的交互对象，PhoneGap插件的时候，你就会发现一个强大的模块化工具会在开发的时候提供极好的帮助。能够帮助你把整体的代码，管理得井井有条。</p>
<p><a target="_blank" rel="noopener" href="http://jade-lang.com/">Jade Template Engine</a></p>
<p>模板引擎。笔者个人比较推荐使用Jade，而且笔者本人也在博客中多次写到Jade在不同场景下使用的技巧的有关文章。主要是jade的语法太简洁了，而且面向JS开发人员非常友好。如果你还没有开始使用模板引擎，赶紧加入这个队列吧，你已经落后了。</p>
<p><a target="_blank" rel="noopener" href="http://jquerymobile.com/">Jquery Mobile</a></p>
<p>如果你暂时还没有一个设计师，但是又急于构造一个应用出来。jquery mobile就提供了多套不同风格的模板，供你使用，而且还含有不同的交互动画等。而且也是跨平台的。当然实际场景中，笔者觉得你会花很多时间在写css上面，因为设计总是天马行空的。当然你还有很多工具啦，例如sass，以及less.js等。</p>
<p>PhoneGap.js或者Cordova.js</p>
<p>做Phonegap开发必须使用的代码库，用于和PhoneGap框架通讯。现在这个库已经改名了，是Cordova。具体为什么改名，得问Adobe咯。</p>
<p><a target="_blank" rel="noopener" href="https://github.com/purplecabbage/phonegap-plugins">PhoneGap Plugins</a></p>
<p>PhoneGap的插件能够帮助你快速地抵达手机的其他API上面，直接使用Javascript来操控这些底层的API。例如调用Push Notification的相应发生的事件。</p>
<p><em>从代码目录上面看混合应用中的Web层：</em></p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><code class="hljs stylus">/js<br>         mainView<span class="hljs-selector-class">.js</span><br>         settingView<span class="hljs-selector-class">.js</span><br>         networkObject<span class="hljs-selector-class">.js</span><br>         renderObject<span class="hljs-selector-class">.js</span><br><br>    /lib<br>         /PhoneGapPlugins<br>              push-notification-plugin<span class="hljs-selector-class">.js</span><br>              pickerView<span class="hljs-selector-class">.js</span><br>         PhoneGap<span class="hljs-selector-class">.js</span><br>         zepto<span class="hljs-selector-class">.js</span><br>         jquerymobile<span class="hljs-selector-class">.js</span><br>         iscroll<span class="hljs-selector-class">.js</span><br>         angular<span class="hljs-selector-class">.js</span><br>         jade<span class="hljs-selector-class">.js</span><br><br>    /css<br>         /mainView<br>              listItemTemplate<span class="hljs-selector-class">.css</span><br>              questionListTemplate<span class="hljs-selector-class">.css</span><br>         /settingView<br>         /personView<br>         /layout<br>              navigationBar<span class="hljs-selector-class">.css</span><br>              tabButton<span class="hljs-selector-class">.css</span><br>         app<span class="hljs-selector-class">.css</span><br><br>    /template<br>         /mainView<br>              listItemTemplate<span class="hljs-selector-class">.txt</span><br>              questionListTemplate<span class="hljs-selector-class">.txt</span><br>         /settingView<br>         /personView<br>         /layout<br>              navigationBarTemplate<span class="hljs-selector-class">.txt</span><br>              tabButtonTemplate<span class="hljs-selector-class">.txt</span><br><br>    index<span class="hljs-selector-class">.html</span><br>    app<span class="hljs-selector-class">.js</span><br>    require.js<br></code></pre></td></tr></table></figure>

<p>从代码的目录上面看，就是经典的静态网页文件的目录，非常简单。下面就用一句话来说说整个应用的运作过程吧：</p>
<p>打开PhoneGap应用 -&gt;进入 index.html -&gt;运行require.js -&gt;加载应用资源 -&gt; app.js 控制整个应用 -&gt; angular.js 进行事件绑定以及视图渲染 -&gt;视图渲染的时候会将数据和加载好的视图模板（template目录下的代码）处理 -&gt;经过jade模板引擎 -&gt;渲染到相应的位置上</p>
<p>就是如此简单。</p>
<p>看完了简单的PhoneGap应用后，笔者们来看看简单iOS应用在开发时候的代码目录吧。思路上还是非常相似的。在这里面，笔者不会深入代码部分去讨论具体的实现以及细节上的东西。</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><code class="hljs stylus">demoApp<br>         /Resource<br>              navigationBar<span class="hljs-selector-class">.png</span><br>              navigationBar@<span class="hljs-number">2</span>x<span class="hljs-selector-class">.png</span><br>        /demoApp<br>              AppDelegate<span class="hljs-selector-class">.h</span><br>              AppDelegate<span class="hljs-selector-class">.m</span><br>              /SettingViewController<br>                   settingViewController<span class="hljs-selector-class">.h</span><br>                   settingViewController<span class="hljs-selector-class">.m</span><br>              /MainViewController<br>                   mainViewController<span class="hljs-selector-class">.h</span><br>                   mainViewController<span class="hljs-selector-class">.m</span><br>              /Supporting Files<br>                   demoApp-Info<span class="hljs-selector-class">.plist</span><br>                   InfoPlist<span class="hljs-selector-class">.strings</span><br>                   ...<br>         /plugin<br>              /AFNetworking<br>                   AFHTTPClient<span class="hljs-selector-class">.h</span><br>                   AFHTTPClient<span class="hljs-selector-class">.m</span><br>                   AFHTTPRequestOperation<span class="hljs-selector-class">.h</span><br>                   AFHTTPRequestOperation<span class="hljs-selector-class">.m</span><br>                   ...<br>         /Frameworks<br>              CoreData<span class="hljs-selector-class">.framework</span><br>              UIKit<span class="hljs-selector-class">.framework</span><br>         /Products<br>              demoApp.app<br></code></pre></td></tr></table></figure>

<p>Objective-C 是一种通用、高级、面向对象的编程语言。Objective-C是承自Smalltalk的信息传递模型（message passing）。Objective-C里，与其说对象互相调用方法，不如说对象之间互相传递信息更为精确。Objective-C强调面对对象编程，且Objective-C中强制要求将类的（interface）与实现（implementation）分为两个部分。类的定义文件遵循C语言之惯例以 .h 为后缀，实现文件以 .m 为后缀。所以你会看到大量的类文件在里头，整个工程就是有不同的类构成的。（当然可能这么描述不太准确，但是便于大家理解）</p>
<p>这就和丰富的Web前端有很大区别了，在Web前端开发里有HTML，CSS，JS三剑客，必须要用好这三个东西才可以把整个应用才可构建出来。但是在Native应用中，就很单一了。你只需要把握好Objective-C就可以了。因此对于原生应用来说，开发时只要遵守好规范，即使是一个新手参与开发，也可以快速地上手，看懂代码。因为模式已经定好，大家使用同一套的API。按着流程走就好了。当然学习Objective-C需要过程，但是对于拥有C语言，Java语言经验的开发者来说，是非常简单的事情。</p>
<p>当然，原生开发的缺点也很明显了，就是满足不了你的跨平台需求。</p>
<p>从代码目录上面看，其实也基本上看到笔者为什么使用多种JS库以及框架的原因了。主要的目的就是为了构建一个可维护的，具有规范性的Web应用。因为本身Javascript这门语言非常灵活，100个人可以具有100种风格，加上没有专门对于Javascript开设的课程，在过往都容易存在对这门语言的误解。基于种种的原因，就要约束好一个应用的代码风格，架构。此外，Javascript本身没有类的概念，所以在Javascript的面向对象编程中：Javascript的数据和成员封装很简单。没有类，完全是对象操作。这和Objective-C有很大不同。这个时候必须要有一种心态处理好整个Web应用：就是尽可能地抽象成对象，你的工作就是对象与对象之间存在交流。</p>
<p>另外有一些点是值得开发者注意的。对于原生应用来说，不管是iOS的，还是Android的，都会提供一套原生界面的库。以Objective-C为例子。如果笔者需要调用Alert，笔者只需要编写：UIAlertView * alertView &#x3D; [[UIAlertViewalloc]init];，就把这个view声明好了。再去执行相应的方法，就可以了。但是对于Web应用来说，就需要编写</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&#x27;alertView&#x27;</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">button</span>&gt;</span>确定<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript">$(<span class="hljs-string">&#x27;#alertView&#x27;</span>).<span class="hljs-title function_">show</span>();</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><br></code></pre></td></tr></table></figure>
<p>一堆的css代码和html代码去实现。当然你会询问笔者，直接写 alert() 不就可以了吗？要是真这么简单的话，建议你在iOS的WebView中编写一下alert，实现：title 是提示，内容是：alert view，确定按钮的文字是：好的。你就知道WebView的限制在哪里了。</p>
<p>因此要完成JS在Web App开发当中的最佳实践，肯定要学习优秀的思想和实现方法了。在这篇文章里面，笔者们暂时先不去做这种深入的讨论。而是先把例子抛给大家，也许会在下一次讨论的时候，再详细深入以下这两个项目。</p>
<p>第一个是斯坦福的iOS开发公开课中的例子，使用objective-c实现，一个简单的卡牌游戏。这是经典的mvc开发了。项目地址如下：<a target="_blank" rel="noopener" href="https://github.com/lbj96347/Stanford-W2013-CardGame%EF%BC%8C%E5%A6%82%E6%9E%9C%E6%82%A8%E6%AD%A3%E5%9C%A8%E4%BD%BF%E7%94%A8Mac%EF%BC%8C%E9%82%A3%E6%81%AD%E5%96%9C%E4%BD%A0%EF%BC%8C%E5%8F%AF%E4%BB%A5%E9%A9%AC%E4%B8%8A%E7%BC%96%E8%AF%91%E8%BF%99%E4%B8%AA%E6%B8%B8%E6%88%8F%E8%BF%9B%E8%A1%8C%E6%B5%8B%E8%AF%95%E4%BB%A5%E5%8F%8A%E4%BB%A3%E7%A0%81%E6%B5%8F%E8%A7%88%E3%80%82">https://github.com/lbj96347/Stanford-W2013-CardGame，如果您正在使用Mac，那恭喜你，可以马上编译这个游戏进行测试以及代码浏览。</a></p>
<p>第二个是使用JavaScript编写的例子，实现同样的需求，做一个简单的卡牌游戏。但是使用的是HTML+CSS+JS开发。同样学习了继承以及mvc的思想。项目地址是：<a target="_blank" rel="noopener" href="https://github.com/lbj96347/JSMatchismo">https://github.com/lbj96347/JSMatchismo</a> ，再次恭喜你，不管使用什么电脑，都可以随时浏览代码以及运行该游戏。</p>
<p>Hybrid App的新思想</p>
<p>这两年多以来，因为市场的不同，也出现了不一样的需求，各个技术都有了新的发展。对于Hybrid App来说，其实都有了一些新的解决方案。为了解决问题其实最终思想都会被还原成以下几个点上：</p>
<p>根据需求，选择工具；<br>用适当的工具做适当的事情，有针对性地解决问题；<br>世界是平衡的，对于开发者来说，做的有用功越多，用户体验就越好，反之越差；<br>跨平台是一个”幌子”，什么都做得到不代表什么都做得好<br>这也是笔者体验最深的几个点。而且你会发现Hybrid技术也基本在跟随这几个点来走。</p>
<p>根据需求，选择工具</p>
<p>如果你使用过Jquery Mobile，你做过过场动画（就是从一个view去到另一个view），过场动画在iOS的navigationController中很常见，而且很简单，效果很好很流畅。在Jquery Mobile中使用ajax，css去实现了，核心代码可能就几十行。可能跟iOS里面的差不多（如果包含动画），但是实际出来的效果却差强人意。会出现类似的问题：页面抖动，感觉不连贯，在部分的设备下运行缓慢。如果你的应用要求的体验并不是很高，例如一些新闻展示类应用，更强调排版。这里小小的体验差距，就可以忽略了。（因为英国BBC就是这么干的），但是如果你的应用非常强调体验细节，这里的解决方案可能就不适合了。或许你要做优化，但是优化的时间可能足以够你去学习更多的东西了。这样的话，你是继续选择用一个不成熟的工具，还是选择去学习一种新的语言呢？所以还是根据需求而定吧。</p>
<p>另外一个例子。曾经有人跟笔者提及到，在使用HTML和CSS编写应用界面时确实很爽，但是效率不咋的。那为什么不尝试把应用内容直接搬到Canvas里面呢？构造一套足够强大的工具，一套足够彪悍的UI组件，把整个应用运行于Canvas中。这种想法是很好的，但是其实里面的短板页就出现了，Canvas的性能虽高，但是里面的元素组件多了你可以保证效果高？所有的东西都会依赖于JavaScript，这对于Javascript来说要构造足够强悍的面向对象的组件，也非简单之事，抛弃了CSS和HTML，意味着内部的设计组件能够高度定制，松耦合做得非常好。完全是实现了一套新的xcode和ui库啊。这就不是在解决一两个问题了。既然有这么一个工具，笔者为什么不选择更好的，例如Xamarin。</p>
<p>用适当的工具做适当的事情</p>
<p>做游戏的朋友估计就深有体会了。为了解决Canvas性能的问题，越来越多的人和应用厂商（尤其是浏览器厂商），提供一种解决方案就是希望将Canvas API和系统底层的API打通。意味着你只需要编写Canvas代码，实际做渲染的时候使用的是系统底层的东西，整体上提高了性能。例如Ejecta <a target="_blank" rel="noopener" href="http://impactjs.com/ejecta">http://impactjs.com/ejecta</a> 这个东西。</p>
<p>对于开发人员来说用Javascript编写游戏逻辑以及做各种控制都非常舒服，而且因为用的API相同，放到PC上（放开性能问题），同样可以运行。这就真的做到了跨平台，但是又不缺乏效率。让笔者感触最深的就是@大城小胖在做混合应用（做游戏）时的做法，小胖的游戏架构。JS负责逻辑，引擎。JS Binding绑定原生OpenGL，让原生的来做复杂的渲染处理。HTML CSS可以处理UI（比如一些Button）。这就是典型的：让工具去做其擅长的事情。</p>
<p>跨平台是一个”幌子”</p>
<p>为什么这么说？笔者不是一直希望大家能够跨平台么？是的。但是要真的认清这个坎。从IE兼容，到目前多个浏览器的乱战，到iOS以及Android设备Web上的兼容，这不就是一个历史的例子嘛。跨平台不是不好，只是在一个时代里，你能够达到怎样的效果，真的是很难估量的。就好比你出国旅游，如果两国关系非常好，而且很多惯例法律一致，对你来说不会造成太多负担。但是如果语言不一样，生活习惯什么的都不同，你就很难适应。同样是人，你很难在不同的环境下生存。真正的跨平台，就意味着大家求同。这绝对不是一两天的事情，也非简单的事情。</p>
<p>那为什么还要跨平台。业务需求嘛。在这里必须就要遵守根据需求选择工具，用适当的工具做适当的事情，根据实际情况来作开发。如果可以，笔者觉得很有必要都了解一遍，这样的话各种开发的思想就会影响到你，你就能够分辨到什么是好什么是坏，做更好的选择。例如笔者刚刚说到的过场动画的例子。其实完全可以使用笔者说的混合应用中，方案三，去解决这个问题。你无非就是希望用navigationController做一个漂亮的过场动画嘛，在iOS中几句代码就实现了。</p>
<p>再说一个例子吧，如果你正在做一个todo-list的应用，其实无非就是简单存储数据以及做一些相关界面渲染。在使用原生的控件的话，有大堆的代码要写，而且还要处理好内存问题。但是其实如果使用Web的方式实现，比如backbone.js。总体代码可能100行左右。就把整个应用实现了，包括本地存储。你要做的事情就是把整个界面搭建得漂亮些。可能就1个小时的工作。但是如果用原生开发，很难保证到一个小时内完成，因为调试编译都需要时间吧？况且还有界面呢。</p>
<p>所以要认清跨平台这个”幌子”，并非所有的问题都用同一个方法处理。笔者们要融汇贯通嘛！</p>
<p>总结和笔者的感受</p>
<p>对于做Web App的坑，其实挺多的。这里无法一一表达。但是相信实践过就会知道如何更好地绕过这些坑（例如笔者说的过场动画的例子）。那么对于开发者来说要有坚强的毅力，努力去实践，满足自己永远不能满足的好奇心，因为最终的经验会给你带来不一样的感受，stay hungry。同时笔者们必须保持一颗学习的心，不断地吸收有营养的思想，学习新的知识，不要太容易满足，stay foolish。每一种语言都会有其中的思想，每一种工具都有自己解决问题的方法论。多尝试就能够给自己带来更优秀的架构，更优秀的应用，提供给用户更好的体验。当然，也会有更好的回报。</p>

                
              </div>
            
            <hr/>
            <div>
              <div class="post-metas my-3">
  
  
</div>


              

              
                <div class="post-prevnext my-3">
                  <article class="post-prev col-6">
                    
                    
                      <a href="/2023/03/22/ios_swift/" title="iOS swift">
                        <i class="iconfont icon-arrowleft"></i>
                        <span class="hidden-mobile">iOS swift</span>
                        <span class="visible-mobile">上一篇</span>
                      </a>
                    
                  </article>
                  <article class="post-next col-6">
                    
                    
                      <a href="/2023/03/22/ios_runtime/" title="iOS Runtime">
                        <span class="hidden-mobile">iOS Runtime</span>
                        <span class="visible-mobile">下一篇</span>
                        <i class="iconfont icon-arrowright"></i>
                      </a>
                    
                  </article>
                </div>
              
            </div>

            
          </article>
        </div>
      </div>
    </div>

    <div class="side-col d-none d-lg-block col-lg-2">
      
  <aside class="sidebar" style="margin-left: -1rem">
    <div id="toc">
  <p class="toc-header">
    <i class="iconfont icon-list"></i>
    <span>目录</span>
  </p>
  <div class="toc-body" id="toc-body"></div>
</div>



  </aside>


    </div>
  </div>
</div>





  



  



  



  



  







    

    
      <a id="scroll-top-button" aria-label="TOP" href="#" role="button">
        <i class="iconfont icon-arrowup" aria-hidden="true"></i>
      </a>
    

    
      <div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel"
     aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header text-center">
        <h4 class="modal-title w-100 font-weight-bold">搜索</h4>
        <button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body mx-3">
        <div class="md-form mb-5">
          <input type="text" id="local-search-input" class="form-control validate">
          <label data-error="x" data-success="v" for="local-search-input">关键词</label>
        </div>
        <div class="list-group" id="local-search-result"></div>
      </div>
    </div>
  </div>
</div>

    

    
  </main>

  <footer>
    <div class="footer-inner">
  
    <div class="footer-content">
       <a href="#" target="_blank" rel="nofollow noopener"><span>zeus</span></a> 
    </div>
  
  
  
  
</div>

  </footer>

  <!-- Scripts -->
  
  <script  src="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.js" ></script>
  <link  rel="stylesheet" href="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.css" />

  <script>
    NProgress.configure({"showSpinner":false,"trickleSpeed":100})
    NProgress.start()
    window.addEventListener('load', function() {
      NProgress.done();
    })
  </script>


<script  src="https://lib.baomitu.com/jquery/3.6.0/jquery.min.js" ></script>
<script  src="https://lib.baomitu.com/twitter-bootstrap/4.6.1/js/bootstrap.min.js" ></script>
<script  src="/js/events.js" ></script>
<script  src="/js/plugins.js" ></script>


  <script  src="https://lib.baomitu.com/typed.js/2.0.12/typed.min.js" ></script>
  <script>
    (function (window, document) {
      var typing = Fluid.plugins.typing;
      var subtitle = document.getElementById('subtitle');
      if (!subtitle || !typing) {
        return;
      }
      var text = subtitle.getAttribute('data-typed-text');
      
        typing(text);
      
    })(window, document);
  </script>




  
    <script  src="/js/img-lazyload.js" ></script>
  




  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/tocbot/4.18.2/tocbot.min.js', function() {
    var toc = jQuery('#toc');
    if (toc.length === 0 || !window.tocbot) { return; }
    var boardCtn = jQuery('#board-ctn');
    var boardTop = boardCtn.offset().top;

    window.tocbot.init(Object.assign({
      tocSelector     : '#toc-body',
      contentSelector : '.markdown-body',
      linkClass       : 'tocbot-link',
      activeLinkClass : 'tocbot-active-link',
      listClass       : 'tocbot-list',
      isCollapsedClass: 'tocbot-is-collapsed',
      collapsibleClass: 'tocbot-is-collapsible',
      scrollSmooth    : true,
      includeTitleTags: true,
      headingsOffset  : -boardTop,
    }, CONFIG.toc));
    if (toc.find('.toc-list-item').length > 0) {
      toc.css('visibility', 'visible');
    }

    Fluid.events.registerRefreshCallback(function() {
      if ('tocbot' in window) {
        tocbot.refresh();
        var toc = jQuery('#toc');
        if (toc.length === 0 || !tocbot) {
          return;
        }
        if (toc.find('.toc-list-item').length > 0) {
          toc.css('visibility', 'visible');
        }
      }
    });
  });
</script>


  <script src=https://lib.baomitu.com/clipboard.js/2.0.11/clipboard.min.js></script>

  <script>Fluid.plugins.codeWidget();</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/anchor-js/4.3.1/anchor.min.js', function() {
    window.anchors.options = {
      placement: CONFIG.anchorjs.placement,
      visible  : CONFIG.anchorjs.visible
    };
    if (CONFIG.anchorjs.icon) {
      window.anchors.options.icon = CONFIG.anchorjs.icon;
    }
    var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
    var res = [];
    for (var item of el) {
      res.push('.markdown-body > ' + item.trim());
    }
    if (CONFIG.anchorjs.placement === 'left') {
      window.anchors.options.class = 'anchorjs-link-left';
    }
    window.anchors.add(res.join(', '));

    Fluid.events.registerRefreshCallback(function() {
      if ('anchors' in window) {
        anchors.removeAll();
        var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
        var res = [];
        for (var item of el) {
          res.push('.markdown-body > ' + item.trim());
        }
        if (CONFIG.anchorjs.placement === 'left') {
          anchors.options.class = 'anchorjs-link-left';
        }
        anchors.add(res.join(', '));
      }
    });
  });
</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.js', function() {
    Fluid.plugins.fancyBox();
  });
</script>


  <script>Fluid.plugins.imageCaption();</script>

  <script  src="/js/local-search.js" ></script>





<!-- 主题的启动项，将它保持在最底部 -->
<!-- the boot of the theme, keep it at the bottom -->
<script  src="/js/boot.js" ></script>


  

  <noscript>
    <div class="noscript-warning">博客在允许 JavaScript 运行的环境下浏览效果更佳</div>
  </noscript>
</body>
</html>
